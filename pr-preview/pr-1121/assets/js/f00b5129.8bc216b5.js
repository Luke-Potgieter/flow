"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2936],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(n),d=r,m=p["".concat(s,".").concat(d)]||p[d]||g[d]||a;return n?o.createElement(m,i(i({ref:t},u),{},{components:n})):o.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:r,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},770:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>u,default:()=>f,frontMatter:()=>l,metadata:()=>p,toc:()=>d});var o=n(7462),r=n(7294),a=n(3905);const i=()=>{const e=window.location.href,[t,n]=r.useState("");return r.useMemo((()=>new URLSearchParams(window.location.search.slice(1)).get("code")),[])?r.createElement("span",{style:{color:"green"}},"You have successfully added the application to your tenant"):r.createElement(r.Fragment,null,r.createElement("span",null,"Input your ",r.createElement("b",null,"Tenant ID")," and follow the prompts to add our application to your tenant:"),r.createElement("br",null),r.createElement("br",null),r.createElement("input",{placeholder:"Tenant ID",value:t,onChange:e=>n(e.target.value)}),r.createElement("a",{style:{marginLeft:8,color:t.length<1?"inherit":void 0},href:t.length>0?(o=t,`https://login.microsoftonline.com/${o}/oauth2/authorize?client_id=42cb0c6c-dab0-411f-9c21-16d5a2b1b025&response_type=code&redirect_uri=${encodeURIComponent(e)}&resource_id=${encodeURIComponent("https://storage.azure.com")}`):null},"Authorize"));var o};var c=n(2389);function s(e){let{children:t,fallback:n}=e;return(0,c.Z)()?r.createElement(r.Fragment,null,t?.()):n??null}const l={sidebar_position:2,title:"Azure Blob Storage"},u=void 0,p={unversionedId:"concepts/storage-mappings/azure-blob",id:"concepts/storage-mappings/azure-blob",title:"Azure Blob Storage",description:"Setting up a Flow account to store data in your Azure Blob storage account requires you to grant our application access to your storage account and container, as well as providing us with some identifying information. At the moment storage mappings are not self-service, so once you have granted access and gathered the required information, reach out to your account manager who will configure your account.",source:"@site/docs/concepts/storage-mappings/azure-blob.mdx",sourceDirName:"concepts/storage-mappings",slug:"/concepts/storage-mappings/azure-blob",permalink:"/pr-preview/pr-1121/concepts/storage-mappings/azure-blob",draft:!1,editUrl:"https://github.com/estuary/flow/edit/master/site/docs/concepts/storage-mappings/azure-blob.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Azure Blob Storage"},sidebar:"tutorialSidebar",previous:{title:"Storage mappings",permalink:"/pr-preview/pr-1121/concepts/storage-mappings/"},next:{title:"Connectors",permalink:"/pr-preview/pr-1121/concepts/connectors"}},g={},d=[{value:"Gathering information",id:"gathering-information",level:3},{value:"Granting Access",id:"granting-access",level:3},{value:"Add application to your tenant",id:"add-application-to-your-tenant",level:4},{value:"Authorize application to your storage account",id:"authorize-application-to-your-storage-account",level:4},{value:"Give us a ring",id:"give-us-a-ring",level:3}],m={toc:d},h="wrapper";function f(e){let{components:t,...r}=e;return(0,a.kt)(h,(0,o.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Setting up a Flow account to store data in your Azure Blob storage account requires you to grant our application access to your storage account and container, as well as providing us with some identifying information. At the moment storage mappings are not self-service, so once you have granted access and gathered the required information, reach out to your account manager who will configure your account."),(0,a.kt)("h3",{id:"gathering-information"},"Gathering information"),(0,a.kt)("p",null,"In order to complete this process, you will need to gather the following data:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Your ",(0,a.kt)("strong",{parentName:"li"},"Azure AD tenant ID"),'. This can be found in the "Azure Active Directory" page here:\n',(0,a.kt)("img",{src:n(6298).Z,width:"1147",height:"507"})),(0,a.kt)("li",{parentName:"ul"},"Your ",(0,a.kt)("strong",{parentName:"li"},"Azure Blob Storage account ID"),'. This can be found in the "Storage Accounts" page here:\n',(0,a.kt)("img",{src:n(3348).Z,width:"852",height:"317"})),(0,a.kt)("li",{parentName:"ul"},"Your ",(0,a.kt)("strong",{parentName:"li"},"Azure Blob Storage container ID"),". This can be found inside your storage account here:\n",(0,a.kt)("img",{src:n(2277).Z,width:"997",height:"599"}))),(0,a.kt)("h3",{id:"granting-access"},"Granting Access"),(0,a.kt)("p",null,"We use an ",(0,a.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/what-is-application-management"},"Azure Application")," to allow granting access to storage resources between your tenant and ours. In order for Flow to write to your storage account, it needs the ",(0,a.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#storage-blob-data-owner"},(0,a.kt)("inlineCode",{parentName:"a"},"Storage Blob Data Owner"))," IAM role for the storage account in question. In order to grant this role, you must first add our application to your tenant."),(0,a.kt)("h4",{id:"add-application-to-your-tenant"},"Add application to your tenant"),(0,a.kt)(s,{mdxType:"BrowserOnly"},(()=>(0,a.kt)(i,{mdxType:"AzureAuthorizeComponent"}))),(0,a.kt)("h4",{id:"authorize-application-to-your-storage-account"},"Authorize application to your storage account"),(0,a.kt)("p",null,"Once the application has been added, you must grant it the ",(0,a.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#storage-blob-data-owner"},(0,a.kt)("inlineCode",{parentName:"a"},"Storage Blob Data Owner"))," IAM role for your storage account."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'Inside your storage account\'s "Access Control (IAM)" tab, click "Add Role Assignment"'),(0,a.kt)("li",{parentName:"ul"},"Search for the string ",(0,a.kt)("inlineCode",{parentName:"li"},"Storage Blob Data Owner")," and select it"),(0,a.kt)("li",{parentName:"ul"},"On the next page, make sure ",(0,a.kt)("inlineCode",{parentName:"li"},"User, group, or service principal"),' is selected, then click "+ Select Members"'),(0,a.kt)("li",{parentName:"ul"},"You must search for the exact name of the application, otherwise it won't show up: ",(0,a.kt)("inlineCode",{parentName:"li"},"Estuary Storage Mappings Prod")),(0,a.kt)("li",{parentName:"ul"},"Once you've selected the application, finish granting the role and you should be all set")),(0,a.kt)("h3",{id:"give-us-a-ring"},"Give us a ring"),(0,a.kt)("p",null,"Once you've finished the above steps, the next part is to contact us. Self-service storage mapping configuration is on our roadmap, but for the moment we're happy to configure your account by hand. Send ",(0,a.kt)("a",{parentName:"p",href:"mailto:support@estuary.dev"},"support@estuary.dev")," an email containing all of the information you gathered above, as well as whether you want the storage mapping to apply to your whole Flow account, or just a subset of it. We'll get back to you letting you know when it's done, and that's it!"))}f.isMDXComponent=!0},6298:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Azure_AD_Tenant_ID-755966905d34f909de14009536374173.png"},2277:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Azure_Container_ID-de1a2aac02163282fc8694374ac22c27.png"},3348:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Azure_Storage_Account_Name-0f3730e71af4f785f38be9df59f63d5e.png"}}]);