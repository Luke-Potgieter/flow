<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Estuary Flow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Estuary Flow Atom Feed"><title data-react-helmet="true">Connectors | Estuary Flow</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.estuary.dev/concepts/connectors/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Connectors | Estuary Flow"><meta data-react-helmet="true" name="description" content="Flow’s vision is to provide a common runtime against which any open connector may be run."><meta data-react-helmet="true" property="og:description" content="Flow’s vision is to provide a common runtime against which any open connector may be run."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.estuary.dev/concepts/connectors/"><link data-react-helmet="true" rel="alternate" href="https://docs.estuary.dev/concepts/connectors/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.estuary.dev/concepts/connectors/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f28ed1e5.css">
<link rel="preload" href="/assets/js/runtime~main.4a1bbd1c.js" as="script">
<link rel="preload" href="/assets/js/main.324620e7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/EstuaryAnimated.gif" alt="Estuary Flow Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/EstuaryAnimated.gif" alt="Estuary Flow Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Estuary Flow</b></a><a class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/">Overview</a><button aria-label="Toggle the collapsible sidebar category &#x27;Overview&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/getting-started/installation/">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_TwRn" href="/concepts/">Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/captures/">Captures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/collections/">Collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/concepts/connectors/">Connectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/derivations/">Derivations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/flowctl/">flowctl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/import/">Imports</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/journals/">Journals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/materialization/">Materializations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/projections/">Projections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/schemas/">Schemas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/shards/">Task Shards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/storage-mappings/">Storage Mappings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/tests/">Tests</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/guides/create-dataflow/">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/reference/reduction-strategies/">Reference</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Connectors</h1></header><p>Flow’s vision is to provide a common runtime against which any open connector may be run.
Today Flow supports the
<a href="https://docs.airbyte.io/understanding-airbyte/airbyte-specification" target="_blank" rel="noopener noreferrer">Airbyte specification</a>
as well as Flow’s low-latency gRPC protocols for captures and materializations.</p><p>Estuary is implementing a number of connectors,
with a particular focus on integrating high-performance technical systems.
Connectors for SaaS APIs are already well-covered through Flow’s support of
Airbyte connectors and the <a href="https://www.singer.io" target="_blank" rel="noopener noreferrer">singer.io</a> ecosystem.
Connectors implemented by Estuary are dual-licensed under Apache 2.0 or MIT.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="why-an-open-connector-architecture">Why an open connector architecture?<a class="hash-link" href="#why-an-open-connector-architecture" title="Direct link to heading">​</a></h2><p>Historically, data platforms have directly implemented integrations to external systems with which they interact.
Today, there are simply so many systems and APIs that companies use,
that it’s not feasible for a company to provide all possible integrations.
Users are forced to wait indefinitely while the platform works through their prioritized integration list.</p><p>An open connector architecture removes Estuary — or any company — as a bottleneck in the development of integrations.
Estuary contributes open-source connectors to the ecosystem, and in turn is able to leverage connectors implemented by others.
Users are empowered to write their own connectors for esoteric systems not already covered by the ecosystem.</p><p>Furthermore, implementing a Docker-based community specification brings other important qualities to Estuary connectors:</p><ul><li>Cross-platform interoperability between Flow, Airbyte, and any other platform that supports the protocol</li><li>Connectors can be written in any language and run on any machine</li><li>Built-in solutions for version management (through image tags) and distribution.</li><li>Container Image Registries allow you to integrate connectors from different sources at will, without the centralized control of a single company</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="using-connectors">Using Connectors<a class="hash-link" href="#using-connectors" title="Direct link to heading">​</a></h2><p>Connectors are packaged as <a href="https://opencontainers.org/" target="_blank" rel="noopener noreferrer">Open Container</a> (Docker) images,
and can be discovered, tagged, and pulled using
<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub</a>,
<a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry" target="_blank" rel="noopener noreferrer">GitHub Container Registry</a>,
or any other public image registry provider.</p><p>To interface with a connector, the Flow runtime needs to know:</p><ol><li><p>The specific image to use, through an image name such as <code>ghcr.io/estuary/source-postgres:dev</code>.
Notice that the image name also conveys the specific image registry and version tag to use.</p></li><li><p>Endpoint configuration such as a database address and account, with meaning that is specific to the connector.</p></li><li><p>Resource configuration such as a specific database table to capture, which is also specific to the connector.</p></li></ol><p>To integrate a connector within your dataflow,
you define all three components within your catalog specification:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">materializations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">acmeCo/postgres-views</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">endpoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">connector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 1: Provide the image which implements your endpoint connector.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/estuary/materialize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 2: Provide endpoint configuration which the connector requires.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5432</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">bindings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> acmeCo/products/anvils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 3: Provide resource configuration for the binding between the Flow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#    collection and the endpoint resource. This connector interfaces</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#    with a SQL database and its resources are database tables. Here,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#    we provide a table to create and materialize which is bound to the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#    `acmeCo/products/anvils` source collection.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">table</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> anvil_products</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Multiple resources can be configured through a single connector.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Bind additional collections to tables as part of this connector instance:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> acmeCo/products/TNT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">table</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> tnt_products</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> acmeCo/customers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">table</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> customers</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In some cases, you may be comfortable writing out the required configuration of your connector.
Often you don&#x27;t know what configuration a connector requires ahead of time.
Or you may simply prefer a more guided workflow.</p><p>For this reason connectors offer APIs which specify the configuration they may require,
or the resources they may have available.
Flow uses these APIs to offer guided workflows for easy configuration and usage of connectors.</p><p>The different processes you can use to implement connectors are each described below in general terms.
Configuration details for each connector are described on their individual pages.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Estuary is implementing better UI-driven workflows to easily
configure and use connectors, expected by end of Q1 2022.
The support offered today is rudimentary.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="flowctl-discover"><code>flowctl discover</code><a class="hash-link" href="#flowctl-discover" title="Direct link to heading">​</a></h3><p>The <a href="/concepts/flowctl/"><code>flowctl</code></a> command-line tool offers a <code>discover</code> sub-command
which offers a rudimentary guided workflow for creating a connector instance.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Limitation</h5></div><div class="admonition-content"><p>Currently, <code>flowctl discover</code> is limited to creating catalog captures using a connector.
Materializations must be written manually.</p></div></div><p><code>discover</code> generates a catalog source file which includes the capture specification
as well as recommended <strong>collections</strong> which are bound to each captured resource of the endpoint.
This makes the <code>discover</code> workflow a quick way to start setting up a new data flow.</p><ol><li>In your terminal, run:</li></ol><div class="codeBlockContainer_J+bg language-console theme-code-block"><div class="codeBlockContent_csEI console"><pre tabindex="0" class="prism-code language-console codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">flowctl discover --image=ghcr.io/estuary/&lt;connector-name&gt;:dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This generates a config from the latest version of the connector, provided as a Docker image.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>A list of connector images can be found <a href="/reference/Connectors/capture-connectors/">here</a></p></div></div><ol start="2"><li><p>Open the newly generated config file called <code>discover-source-&lt;connector-name&gt;-config.yaml</code>.
This is your space to specify the required values for the connector.
Fill in required values and modify other values, if you&#x27;d like.</p></li><li><p>Run the command again:</p></li></ol><div class="codeBlockContainer_J+bg language-console theme-code-block"><div class="codeBlockContent_csEI console"><pre tabindex="0" class="prism-code language-console codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">flowctl discover --image=ghcr.io/estuary/&lt;connector-name&gt;:dev</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="4"><li>Open the resulting catalog spec file, <code>discover-source-&lt;connector-name&gt;.flow.yaml</code>.
It will include a capture definition with one or more bindings, and the collection(s) created to support each binding.</li></ol><p>If you notice any undesired resources from the endpoint were included in the catalog spec,
you can remove its binding and corresponding collection to remove it from your catalog.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="editing-with-flowctl-check">Editing with <code>flowctl check</code><a class="hash-link" href="#editing-with-flowctl-check" title="Direct link to heading">​</a></h3><p>You can directly write your capture or materialization in a catalog source file,
and use <code>flowctl check</code> to provide a fast feedback loop to determine what configuration
may be missing or incorrect.</p><p>This is the current supported path for creating materializations.
Typically, you will have already have a catalog spec with a capture and collections using <code>discover</code>.
Now, you&#x27;re simply adding a materialization to complete the dataflow.</p><ol><li>Find your <a href="/reference/Connectors/materialization-connectors/">materialization connector</a>
and use the provided code sample as a template.</li><li>Fill in the required values and other values, if desired.</li><li>Add as many additional bindings as you need.
As with captures, each collection in your catalog must have an individual binding
to be connected to the endpoint system.</li><li>Run <code>flowctl check</code> to verify that the connector can reach the endpoint system,
and that all configuration is correct.</li></ol><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Flow integrates with VSCode and other editors to offer auto-complete within catalog source files,
which makes it easier to write and structure your files.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="credential-manager">Credential Manager<a class="hash-link" href="#credential-manager" title="Direct link to heading">​</a></h3><p>This method is for Beta clients using Flow as a managed service.</p><p>The Estuary Credential Manager acts and feels like a simple user interface. In practice, it&#x27;s a secure way to collect the configurations details for your use case, so that Estuary engineers can create and start your dataflow.</p><p>To use it, simply select your desired connector from the drop-down menu and fill out the required fields.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="flow-ui">Flow UI<a class="hash-link" href="#flow-ui" title="Direct link to heading">​</a></h3><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Beta</h5></div><div class="admonition-content"><p>Flow UI is still undergoing development and will be available, with detailed documentation, in mid 2022.</p></div></div><p>The Flow user interface is an alternative to the GitOps workflow,
but both provide the same results and can be used interchangeably to work with the same Flow catalog.</p><p>In the UI, you select the connector you want to use and populate the fields that appear.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><p>Connectors interface with external systems and universally require endpoint configuration,
such as a database hostname or account credentials,
which must be provided to the connector for it to function.
When directly working with catalog source files,
you have the option of inlining configuration into your connector
or storing it in separate files:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_vU9c tabs__item--active">Inline</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">Referenced File</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">my.flow.yaml</div><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">materializations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">acmeCo/postgres-views</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">endpoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">connector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/estuary/materialize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5432</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">bindings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">my.flow.yaml</div><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">materializations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">acmeCo/postgres-views</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">endpoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">connector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/estuary/materialize</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">bindings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">my.config.yaml</div><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">database</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5432</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></div><p>Storing configuration in separate files serves to important purposes:</p><ul><li>Re-use of configuration across multiple captures or materializations.</li><li>Making it possible to protect your sensitive credentials.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="protecting-secrets">Protecting Secrets<a class="hash-link" href="#protecting-secrets" title="Direct link to heading">​</a></h3><p>Most endpoint systems require credentials of some kind,
such as a username or password.</p><p>Directly storing secrets in files which are versioned in Git is poor practice.
Similarly, sensitive credentials should be protected while not in use within Flow&#x27;s runtime as well.
The only time a credential needs to be directly accessed is when it&#x27;s
required by Flow&#x27;s runtime for the purposes of instantiating the connector.</p><p>Flow integrates with Mozilla’s <a href="https://github.com/mozilla/sops" target="_blank" rel="noopener noreferrer">sops</a> tool,
which can encrypt and protect credentials within a GitOps-managed catalog.
Flow&#x27;s runtime similarly stores a <code>sops</code>-protected configuration in its encrypted form,
and decrypts it only when invoking a connector on the user’s behalf.</p><p>Sops, short for “Secrets Operations,” is a tool that encrypts the values of a JSON or YAML document
against a key management system (KMS) such as Google Cloud Platform KMS, Azure Key Vault, or Hashicorp Vault.
Encryption or decryption of a credential with <code>sops</code> is an active process:
it requires that the user (or the Flow runtime identity) have a current authorization to the required KMS,
and creates a request trace which can be logged and audited.
It&#x27;s also possible to revoke access to the KMS,
which immediately and permanently removes access to the protected credential.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="example-protect-a-configuration">Example: Protect a Configuration<a class="hash-link" href="#example-protect-a-configuration" title="Direct link to heading">​</a></h4><p>Suppose your given a connector configuration:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">config.yaml</div><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;this is sensitive!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can protect it using a Google KMS key that you own:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Login to Google Cloud and initialize application default credentials used by `sops`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ gcloud auth application-default login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Use `sops` to re-write the configuration document in place, protecting its values.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sops --encrypt --in-place --gcp-kms projects/your-project-id/locations/us-central1/keyRings/your-ring/cryptoKeys/your-key-name config.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>sops</code> re-writes the file, wrapping each value in an encrypted envelope and adding a <code>sops</code> metadata section:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">config.yaml</div><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">K/clly65pThTg2U=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1bNmY8wjtjHFBcXLR1KFcsNMGVXRl5LGTdREUZIgcEU=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5GKcguVPihXXDIM7HHuNnA==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">IDDY+fl0/gAcsH+6tjRdww+G</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Ye8st7zJ9wsMRMs6BoAyWlaJeNc9qeNjkkjo6BPp/tE=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">EPS9Unkdg4eAFICGujlTfQ==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">w+F7MMwQhw==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">amHhNCJWAJnJaGujZgjhzVzUZAeSchEpUpBau7RVeCg=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">62HguhnnSDqJdKdwYnj7mQ==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Some items omitted for brevity:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gcp_kms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resource_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id/locations/us</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">central1/keyRings/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ring/cryptoKeys/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">created_at</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T15:49:45Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">enc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CiQAW8BC2GDYWrJTp3ikVGkTI2XaZc6F4p/d/PCBlczCz8BZiUISSQCnySJKIptagFkIl01uiBQp056c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastmodified</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T15:49:45Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 3.7.1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You then use this <code>config.yaml</code> within your Flow catalog.
The Flow runtime knows that this document is protected by <code>sops</code>
will continue to store it in its protected form,
and will attempt a decryption only when invoking a connector on your behalf.</p><p>If you need to make further changes to your configuration,
edit it using <code>sops config.yaml</code>.
It&#x27;s not required to provide the KMS key to use again,
as <code>sops</code> finds it within its metadata section.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>When deploying catalogs onto the managed Flow runtime,
you must grant access to decrypt your GCP KMS key to the Flow runtime service agent,
which is:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">flow-258@helpful-kingdom-273219.iam.gserviceaccount.com</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Due to a known issue within <code>sops</code> and Flow,
you must currently order your configuration files in their natural key-sorted order.
See <a href="https://github.com/estuary/flow/issues/303" target="_blank" rel="noopener noreferrer">https://github.com/estuary/flow/issues/303</a></p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="example-protect-portions-of-a-configuration">Example: Protect Portions of a Configuration<a class="hash-link" href="#example-protect-portions-of-a-configuration" title="Direct link to heading">​</a></h4><p>Endpoint configurations are typically a mix of sensitive and non-sensitive values.
It can be cumbersome when <code>sops</code> protects an entire configuration document as you
lose visibility into non-sensitive values, which you might prefer to store as
cleartext for eas of use.</p><p>You can use the encrypted-suffix feature of <code>sops</code> to selectively protect credentials:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">config.yaml</div><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password_sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;this is sensitive!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Notice that <code>password</code> in this configuration has an added <code>_sops</code> suffix.
Next, encrypt only values which have that suffix:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ sops --encrypt --in-place --encrypted-suffix </span><span class="token string" style="color:#e3116c">&quot;_sops&quot;</span><span class="token plain"> --gcp-kms projects/your-project-id/locations/us-central1/keyRings/your-ring/cryptoKeys/your-key-name config.yaml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>sops</code> re-writes the file, wrapping only values having a &quot;_sops&quot; suffix and adding its <code>sops</code> metadata section:</p><div class="codeBlockContainer_J+bg language-yaml theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_oQzk">config.yaml</div><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password_sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">dlfidMrHfDxN//nWQTPCsjoG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">DHQ5dXhyOOSKI6ZIzcUM67R6DD/2MSE4LENRgOt6GPY=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">FNs2pTlzYlagvz7vP/YcIQ==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Some items omitted for brevity:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">encrypted_suffix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> _sops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">gcp_kms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resource_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id/locations/us</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">central1/keyRings/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ring/cryptoKeys/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">created_at</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T16:06:36Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">enc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CiQAW8BC2Au779CGdMFUjWPhNleCTAj9rL949sBvPQ6eyAC3EdESSQCnySJKD3eWX8XrtrgHqx327</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastmodified</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T16:06:37Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 3.7.1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You then use this <code>config.yaml</code> within your Flow catalog.
Flow looks for and understands the <code>encrypted_suffix</code>,
and will remove this suffix from configuration keys before passing them to the connector.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="available-connectors">Available Connectors<a class="hash-link" href="#available-connectors" title="Direct link to heading">​</a></h2><p><a href="/reference/Connectors/">Learn about available connectors in the reference section</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/estuary/flow/edit/master/site/docs/concepts/connectors.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/concepts/collections/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Collections</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/concepts/derivations/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Derivations</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-an-open-connector-architecture" class="table-of-contents__link toc-highlight">Why an open connector architecture?</a></li><li><a href="#using-connectors" class="table-of-contents__link toc-highlight">Using Connectors</a><ul><li><a href="#flowctl-discover" class="table-of-contents__link toc-highlight"><code>flowctl discover</code></a></li><li><a href="#editing-with-flowctl-check" class="table-of-contents__link toc-highlight">Editing with <code>flowctl check</code></a></li><li><a href="#credential-manager" class="table-of-contents__link toc-highlight">Credential Manager</a></li><li><a href="#flow-ui" class="table-of-contents__link toc-highlight">Flow UI</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#protecting-secrets" class="table-of-contents__link toc-highlight">Protecting Secrets</a></li></ul></li><li><a href="#available-connectors" class="table-of-contents__link toc-highlight">Available Connectors</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Flow Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/EstuaryDev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Estuary Technologies, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4a1bbd1c.js"></script>
<script src="/assets/js/main.324620e7.js"></script>
</body>
</html>